from sys import argv

def main():
    if len(argv) < 3:
        raise Exception("Insufficient number of arguments")
    
    if argv[1] == "pre":
        #reads in the program
        f = open(argv[2], "r")
        program = f.read()
        f.close()
        
        #makes a copy of the program to recover from later
        f = open(argv[2]+".copy", "w")
        f.write(program)
        f.close();
        
        #removes package statement
        program = program[program.index(";")+4:]
        
        #writes out the modified program
        f = open(argv[2], "w")
        f.write(program)
        f.close()
        
    elif argv[1] == "post":
        #reads in the program
        f = open(argv[2], "r")
        program = f.read()
        f.close()
        
        package = argv[2][argv[2].index('/'):argv[2].rindex('/')]
        
        f = open(argv[2], "w")
        f.write(package + "\n\n" + program)
        f.close()
        
    else:
        raise Exception(argv[1] + " is not an option")
        

if __name__ == '__main__':
    main()